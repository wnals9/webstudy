<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  

  <script>

    /*
      JSON 내장 객체
      
      1. JavaScript 객체 -> 문자열 형식의 JSON 데이터
        var 문자열 = JSON.stringify(객체)

      2. 문자열 형식의 JSON 데이터 -> JavaScript 객체
        var 객체 = JSON.parse(문자열)
    */

    // 객체 생성
    var person = {
      name: '홍길동',
      age: 30
    };

    // 객체 -> 문자열
    var str = JSON.stringify(person);
    console.log(typeof str, str);

    // 문자열 -> 객체
    var person = JSON.parse(str);
    console.log(typeof person, person);

  </script>


  <script>

    /*
      Date 내장 객체

      1. 타임스탬프 기반으로 날짜와 시간을 나타낸다.
        (타임스탬프 : 1970년 1월 1일 자정 UTC 기준으로 증가하고 있는 밀리초)
      2. 타임스탬프, 년, 월, 일, 시, 분, 초 등 원하는 값을 얻을 수 있다.
    */

    // 타임스탬프
    var timestamp = Date.now();
    console.log(timestamp);

    // 문자열 형식의 현재 날짜와 시간
    var strNow = Date();  // new Data().toString()
    console.log(typeof strNow, strNow);

    // 객체 형식의 현재 날짜와 시간
    var now = new Date();
    console.log(typeof now, now);

    // 년,월,일,시,분,초,타임스탬프
    var year = now.getFullYear();
    var month = now.getMonth();  // 주의! 0 ~ 11
    var day = now.getDate();
    var hour = now.getHours();
    var minute = now.getMinutes();
    var second = now.getSeconds();
    var timestamp = now.getTime();
    console.log(year, month, day, hour, minute, second, timestamp);

    // 특정 날짜와 시간을 가진 객체 생성
    var someday = new Date(2023, 8, 30, 16, 30, 30);  // 2023-09-30 16:30:30 (8월이 아님 주의!)
    console.log(someday);

  </script>


  <!-- 문제1. 시계 만들기 -->
  <style>
    .warning {
      color: crimson;
    }
  </style>
  <div id="watch">
    <span id="year"></span>년
    <span id="month"></span>월
    <span id="day"></span>일
    <span id="hour"></span>시
    <span id="minute"></span>분
    <span id="second"></span>초
  </div>
  <script>
    setInterval(function(){
      // 화면 표시
      var now = new Date();
      document.getElementById('year').textContent = now.getFullYear();
      document.getElementById('month').textContent = String(now.getMonth() + 1).padStart(2, '0');
      document.getElementById('day').textContent = String(now.getDate()).padStart(2, '0');
      document.getElementById('hour').textContent = String(now.getHours()).padStart(2, '0');
      document.getElementById('minute').textContent = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('second').textContent = String(now.getSeconds()).padStart(2, '0');
      // 50초 넘으면 class 속성 변경
      if(now.getSeconds() >= 50){
        document.getElementById('watch').setAttribute('class', 'warning');
      } else {
        document.getElementById('watch').removeAttribute('class');
      }
    }, 1000);
  </script>


  <!-- 문제2. 디데이 -->
  <!-- 1일 이상 남은 경우 : D-DAY 70일 15:10 -->
  <!-- 1일 미만 남은 경우 : D-DAY 15:10 -->
  <!-- 디데이가 지난 경우 : D-DAY 입니다. -->
  <div id="dday"></div>
  <script>
    
    setInterval(function(){

      var now = new Date();               // 2023-08-30
      var dday = new Date(2023, 10, 16);  // 2023-11-16
      
      var timestamp = dday.getTime() - now.getTime();  // dday - now로 계산해도 타임스탬프 결과가 나옴
      var totalSecond = parseInt(timestamp / 1000);  // 밀리초를 초 단위로 변환함(parseInt : 소수점 제거됨)
      var restDay = parseInt(totalSecond / 60 / 60 / 24);
      var restHour = parseInt(totalSecond / 60 / 60) % 24;
      var restMinute = parseInt(totalSecond / 60) % 60;
  
      var str = 'D-DAY&nbsp;';
      if(totalSecond > 0){
        if(restDay >= 1){
          str += restDay + '일&nbsp;';
        }
        str += String(restHour).padStart(2, '0') + ':' + String(restMinute).padStart(2, '0');
      } else {
        str += '입니다.';
      }
  
      document.getElementById('dday').innerHTML = '<h1>' + str + '</h1>';

    }, 1000);

  </script>


</body>
</html>